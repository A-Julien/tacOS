<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>tac0S: code/threads/thread.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tac0S
   </div>
   <div id="projectbrief">Template Affectional Command Operating System</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_050edd66366d13764f98250ef6db77f6.html">code</a></li><li class="navelem"><a class="el" href="dir_9f2db50d4588c0c8d7c60f6cbede5bdc.html">threads</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">thread.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Data structures for managing threads.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;copyright.h&quot;</code><br />
<code>#include &quot;<a class="el" href="utility_8h_source.html">utility.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="synch_8h_source.html">synch.h</a>&quot;</code><br />
</div>
<p><a href="thread_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_thread.html">Thread</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The following class defines a "thread control block" &ndash; which represents a single thread of execution.  <a href="class_thread.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ac4750389bd2f44f1d404c25f8910e92b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac4750389bd2f44f1d404c25f8910e92b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread_8h.html#ac4750389bd2f44f1d404c25f8910e92b">MachineStateSize</a>&#160;&#160;&#160;18</td></tr>
<tr class="memdesc:ac4750389bd2f44f1d404c25f8910e92b"><td class="mdescLeft">&#160;</td><td class="mdescRight">CPU register state to be saved on context switch. The SPARC and MIPS only need 10 registers, but the Snake needs 18. For simplicity, this is just the max over all architectures. <br /></td></tr>
<tr class="separator:ac4750389bd2f44f1d404c25f8910e92b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa63b5617d3ddf26abb70f9b8d2b334f5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa63b5617d3ddf26abb70f9b8d2b334f5"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread_8h.html#aa63b5617d3ddf26abb70f9b8d2b334f5">StackSize</a>&#160;&#160;&#160;(4 * 1024)</td></tr>
<tr class="memdesc:aa63b5617d3ddf26abb70f9b8d2b334f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Size of the thread's private execution stack. WATCH OUT IF THIS ISN'T BIG ENOUGH!!!!! <br /></td></tr>
<tr class="separator:aa63b5617d3ddf26abb70f9b8d2b334f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ae2739961013a00cede621d4d72f2173c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae2739961013a00cede621d4d72f2173c"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread_8h.html#ae2739961013a00cede621d4d72f2173c">ThreadStatus</a> { <b>JUST_CREATED</b>, 
<b>RUNNING</b>, 
<b>READY</b>, 
<b>BLOCKED</b>
 }<tr class="memdesc:ae2739961013a00cede621d4d72f2173c"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="class_thread.html" title="The following class defines a &quot;thread control block&quot; â€“ which represents a single thread of execution...">Thread</a> state. <br /></td></tr>
</td></tr>
<tr class="separator:ae2739961013a00cede621d4d72f2173c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab8e783c955e46c7b38197910c485b7a7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread_8h.html#ab8e783c955e46c7b38197910c485b7a7">ThreadPrint</a> (int arg)</td></tr>
<tr class="memdesc:ab8e783c955e46c7b38197910c485b7a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">external function, dummy routine whose sole job is to call Thread::Print  <a href="#ab8e783c955e46c7b38197910c485b7a7">More...</a><br /></td></tr>
<tr class="separator:ab8e783c955e46c7b38197910c485b7a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac34fec5b8ba05e6039703ab68f5e9118"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac34fec5b8ba05e6039703ab68f5e9118"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>ThreadRoot</b> ()</td></tr>
<tr class="separator:ac34fec5b8ba05e6039703ab68f5e9118"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10e80b5f1da660f5390f448c8fee2ae7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a10e80b5f1da660f5390f448c8fee2ae7"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>SWITCH</b> (<a class="el" href="class_thread.html">Thread</a> *oldThread, <a class="el" href="class_thread.html">Thread</a> *newThread)</td></tr>
<tr class="separator:a10e80b5f1da660f5390f448c8fee2ae7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Data structures for managing threads. </p>
<dl class="section author"><dt>Author</dt><dd>Olivier Hureau, Hugo Feydel , Julien ALaimo Data structures for managing threads. A thread represents sequential execution of code within a program. So the state of a thread includes the program counter, the processor registers, and the execution stack.</dd></dl>
<p>Note that because we allocate a fixed size stack for each thread, it is possible to overflow the stack &ndash; for instance, by recursing to too deep a level. The most common reason for this occuring is allocating large data structures on the stack. For instance, this will cause problems: </p><pre class="fragment">    void foo() { int buf[1000]; ...}
</pre><p>Instead, you should allocate all data structures dynamically: </p><pre class="fragment">    void foo() { int *buf = new int[1000]; ...}
</pre><p>Bad things happen if you overflow the stack, and in the worst case, the problem may not be caught explicitly. Instead, the only symptom may be bizarre segmentation faults. (Of course, other problems can cause seg faults, so that isn't a sure sign that your thread stacks are too small.)</p>
<p>One thing to try if you find yourself with seg faults is to increase the size of thread stack &ndash; ThreadStackSize.</p>
<p>In this interface, forking a thread takes two steps. We must first allocate a data structure for it: "t = new Thread". Only then can we do the fork: "t-&gt;fork(f, arg)".</p>
<p>Copyright (c) 1992-1993 The Regents of the University of California. All rights reserved. See <a class="el" href="copyright_8h_source.html">copyright.h</a> for copyright notice and limitation of liability and disclaimer of warranty provisions. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ab8e783c955e46c7b38197910c485b7a7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ThreadPrint </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>arg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>external function, dummy routine whose sole job is to call Thread::Print </p>
<p>external function, dummy routine whose sole job is to call Thread::Print </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
