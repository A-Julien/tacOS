<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>tac0S: code/machine/sysdep.cc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tac0S
   </div>
   <div id="projectbrief">Template Affectional Command Operating System</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_050edd66366d13764f98250ef6db77f6.html">code</a></li><li class="navelem"><a class="el" href="dir_c6faf5bb1a362c64e2b4a502a2d69864.html">machine</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">sysdep.cc File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Implementation of system-dependent interface.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;copyright.h&quot;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;signal.h&gt;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;sys/time.h&gt;</code><br />
<code>#include &lt;sys/socket.h&gt;</code><br />
<code>#include &lt;sys/file.h&gt;</code><br />
<code>#include &lt;sys/un.h&gt;</code><br />
<code>#include &lt;sys/mman.h&gt;</code><br />
<code>#include &lt;sys/stat.h&gt;</code><br />
<code>#include &lt;fcntl.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;errno.h&gt;</code><br />
<code>#include &quot;<a class="el" href="interrupt_8h_source.html">interrupt.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="system_8h_source.html">system.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a282c8a42eabdf04f5177d4a88139d0ec"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a282c8a42eabdf04f5177d4a88139d0ec"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>creat</b> (const char *name, unsigned short mode)</td></tr>
<tr class="separator:a282c8a42eabdf04f5177d4a88139d0ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac843f2e35e60c3bbf1da47d84306f29b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac843f2e35e60c3bbf1da47d84306f29b"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>open</b> (const char *name, int flags,...)</td></tr>
<tr class="separator:ac843f2e35e60c3bbf1da47d84306f29b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2aec7b35176e92640714c91ef886f15c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2aec7b35176e92640714c91ef886f15c"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>select</b> (int numBits, void *readFds, void *writeFds, void *exceptFds, struct timeval *timeout)</td></tr>
<tr class="separator:a2aec7b35176e92640714c91ef886f15c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6e154f3d23907c2f499b54d2d386fc9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae6e154f3d23907c2f499b54d2d386fc9"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>unlink</b> (char *name)</td></tr>
<tr class="separator:ae6e154f3d23907c2f499b54d2d386fc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad69dc0274328d82982430dc65be73623"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad69dc0274328d82982430dc65be73623"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>read</b> (int filedes, char *buf, int numBytes)</td></tr>
<tr class="separator:ad69dc0274328d82982430dc65be73623"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a432e107bd9a5102a2b6fe4e8d752ef"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9a432e107bd9a5102a2b6fe4e8d752ef"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>write</b> (int filedes, char *buf, int numBytes)</td></tr>
<tr class="separator:a9a432e107bd9a5102a2b6fe4e8d752ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ac81417ea099dcfaa618b46d7fc1ea2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4ac81417ea099dcfaa618b46d7fc1ea2"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>lseek</b> (int filedes, int offset, int whence)</td></tr>
<tr class="separator:a4ac81417ea099dcfaa618b46d7fc1ea2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd5fd461185c346576ade864b0cea305"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acd5fd461185c346576ade864b0cea305"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>tell</b> (int filedes)</td></tr>
<tr class="separator:acd5fd461185c346576ade864b0cea305"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac27bb3145ebeaec9b4661acfd47e4c51"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac27bb3145ebeaec9b4661acfd47e4c51"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>close</b> (int filedes)</td></tr>
<tr class="separator:ac27bb3145ebeaec9b4661acfd47e4c51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a210f1bb7dc29a87394a25027e4231004"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a210f1bb7dc29a87394a25027e4231004"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>srand</b> (unsigned seed)</td></tr>
<tr class="separator:a210f1bb7dc29a87394a25027e4231004"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae23144bcbb8e3742b00eb687c36654d1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae23144bcbb8e3742b00eb687c36654d1"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>rand</b> (void)</td></tr>
<tr class="separator:ae23144bcbb8e3742b00eb687c36654d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2035cc6303b152bcae62b88aeb0a1113"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2035cc6303b152bcae62b88aeb0a1113"></a>
unsigned&#160;</td><td class="memItemRight" valign="bottom"><b>sleep</b> (unsigned)</td></tr>
<tr class="separator:a2035cc6303b152bcae62b88aeb0a1113"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac54f53dc342019e8db34f4aa581a5792"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac54f53dc342019e8db34f4aa581a5792"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>abort</b> ()</td></tr>
<tr class="separator:ac54f53dc342019e8db34f4aa581a5792"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a358d2e2397ca11ccd17553e3c40e7901"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a358d2e2397ca11ccd17553e3c40e7901"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>exit</b> ()</td></tr>
<tr class="separator:a358d2e2397ca11ccd17553e3c40e7901"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa519270187f0f6c571726a3c75ac1025"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa519270187f0f6c571726a3c75ac1025"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>mprotect</b> (char *addr, int len, int prot)</td></tr>
<tr class="separator:aa519270187f0f6c571726a3c75ac1025"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8757ba7b643ff8279abf9593f543494"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad8757ba7b643ff8279abf9593f543494"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>socket</b> (int, int, int)</td></tr>
<tr class="separator:ad8757ba7b643ff8279abf9593f543494"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10f9a6acf254526e09b4d217383d7386"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a10f9a6acf254526e09b4d217383d7386"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>bind</b> (int, const void *, int)</td></tr>
<tr class="separator:a10f9a6acf254526e09b4d217383d7386"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe6a6510f1a4b2e63b640b6c7ffb9905"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afe6a6510f1a4b2e63b640b6c7ffb9905"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>recvfrom</b> (int, void *, int, int, void *, int *)</td></tr>
<tr class="separator:afe6a6510f1a4b2e63b640b6c7ffb9905"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5535d888ae2029d4bcb26e947c65bfdc"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5535d888ae2029d4bcb26e947c65bfdc"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>sendto</b> (int, const void *, int, int, void *, int)</td></tr>
<tr class="separator:a5535d888ae2029d4bcb26e947c65bfdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d54b43fc541aae810be164b449b331a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sysdep_8cc.html#a6d54b43fc541aae810be164b449b331a">PollFile</a> (int fd)</td></tr>
<tr class="memdesc:a6d54b43fc541aae810be164b449b331a"><td class="mdescLeft">&#160;</td><td class="mdescRight">PollFile Check open file or open socket to see if there are any characters that can be read immediately. If so, read them in, and return TRUE.  <a href="#a6d54b43fc541aae810be164b449b331a">More...</a><br /></td></tr>
<tr class="separator:a6d54b43fc541aae810be164b449b331a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2de662339cf5720253d92012231f4cc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sysdep_8cc.html#aa2de662339cf5720253d92012231f4cc">OpenForWrite</a> (const char *name)</td></tr>
<tr class="memdesc:aa2de662339cf5720253d92012231f4cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">OpenForWrite Open a file for writing. Create it if it doesn't exist; truncate it if it does already exist.  <a href="#aa2de662339cf5720253d92012231f4cc">More...</a><br /></td></tr>
<tr class="separator:aa2de662339cf5720253d92012231f4cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65769583d8f332abff719d4665a3fd8d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sysdep_8cc.html#a65769583d8f332abff719d4665a3fd8d">OpenForReadWrite</a> (const char *name, bool crashOnError)</td></tr>
<tr class="memdesc:a65769583d8f332abff719d4665a3fd8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">OpenForReadWrite Open a file for reading or writing.  <a href="#a65769583d8f332abff719d4665a3fd8d">More...</a><br /></td></tr>
<tr class="separator:a65769583d8f332abff719d4665a3fd8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6140dcc97ab52a9406e6d3f5749fa43c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6140dcc97ab52a9406e6d3f5749fa43c"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sysdep_8cc.html#a6140dcc97ab52a9406e6d3f5749fa43c">Read</a> (int fd, char *buffer, int nBytes)</td></tr>
<tr class="memdesc:a6140dcc97ab52a9406e6d3f5749fa43c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read Read characters from an open file. Abort if read fails. <br /></td></tr>
<tr class="separator:a6140dcc97ab52a9406e6d3f5749fa43c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af39214b3fb93cfbbd141c2bfb0688a4e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af39214b3fb93cfbbd141c2bfb0688a4e"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sysdep_8cc.html#af39214b3fb93cfbbd141c2bfb0688a4e">ReadPartial</a> (int fd, char *buffer, int nBytes)</td></tr>
<tr class="memdesc:af39214b3fb93cfbbd141c2bfb0688a4e"><td class="mdescLeft">&#160;</td><td class="mdescRight">ReadPartial Read characters from an open file, returning as many as are available. <br /></td></tr>
<tr class="separator:af39214b3fb93cfbbd141c2bfb0688a4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae286192dbb756f7ff419d420aed49c68"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae286192dbb756f7ff419d420aed49c68"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sysdep_8cc.html#ae286192dbb756f7ff419d420aed49c68">WriteFile</a> (int fd, const char *buffer, int nBytes)</td></tr>
<tr class="memdesc:ae286192dbb756f7ff419d420aed49c68"><td class="mdescLeft">&#160;</td><td class="mdescRight">WriteFile Write characters to an open file. Abort if write fails. <br /></td></tr>
<tr class="separator:ae286192dbb756f7ff419d420aed49c68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e24d90699a8caf5d5ecf0ea461050b4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5e24d90699a8caf5d5ecf0ea461050b4"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sysdep_8cc.html#a5e24d90699a8caf5d5ecf0ea461050b4">Lseek</a> (int fd, int offset, int whence)</td></tr>
<tr class="memdesc:a5e24d90699a8caf5d5ecf0ea461050b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lseek Change the location within an open file. Abort on error. <br /></td></tr>
<tr class="separator:a5e24d90699a8caf5d5ecf0ea461050b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a031f3b5d904def89e5f0cb71bcd31f91"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a031f3b5d904def89e5f0cb71bcd31f91"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sysdep_8cc.html#a031f3b5d904def89e5f0cb71bcd31f91">Tell</a> (int fd)</td></tr>
<tr class="memdesc:a031f3b5d904def89e5f0cb71bcd31f91"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tell Report the current location within an open file. <br /></td></tr>
<tr class="separator:a031f3b5d904def89e5f0cb71bcd31f91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade6d4842f21ea284e126636e424e6614"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ade6d4842f21ea284e126636e424e6614"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sysdep_8cc.html#ade6d4842f21ea284e126636e424e6614">Close</a> (int fd)</td></tr>
<tr class="memdesc:ade6d4842f21ea284e126636e424e6614"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close Close a file. Abort on error. <br /></td></tr>
<tr class="separator:ade6d4842f21ea284e126636e424e6614"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a5d56db5016ba0eb22084072738dee5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4a5d56db5016ba0eb22084072738dee5"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sysdep_8cc.html#a4a5d56db5016ba0eb22084072738dee5">Unlink</a> (const char *name)</td></tr>
<tr class="memdesc:a4a5d56db5016ba0eb22084072738dee5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlink Delete a file. <br /></td></tr>
<tr class="separator:a4a5d56db5016ba0eb22084072738dee5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a776b711cbcad75a385ef20d8cb04a907"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a776b711cbcad75a385ef20d8cb04a907"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sysdep_8cc.html#a776b711cbcad75a385ef20d8cb04a907">OpenSocket</a> ()</td></tr>
<tr class="memdesc:a776b711cbcad75a385ef20d8cb04a907"><td class="mdescLeft">&#160;</td><td class="mdescRight">OpenSocket Open an interprocess communication (IPC) connection. For now, just open a datagram port where other Nachos (simulating workstations on a network) can send messages to this Nachos. <br /></td></tr>
<tr class="separator:a776b711cbcad75a385ef20d8cb04a907"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f43cc86f59a90746979f53a452a4e0a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0f43cc86f59a90746979f53a452a4e0a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sysdep_8cc.html#a0f43cc86f59a90746979f53a452a4e0a">CloseSocket</a> (int sockID)</td></tr>
<tr class="memdesc:a0f43cc86f59a90746979f53a452a4e0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">CloseSocket Close the IPC connection. <br /></td></tr>
<tr class="separator:a0f43cc86f59a90746979f53a452a4e0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5609fdc7bbe878c35e95cd378dbb1ede"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5609fdc7bbe878c35e95cd378dbb1ede"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sysdep_8cc.html#a5609fdc7bbe878c35e95cd378dbb1ede">AssignNameToSocket</a> (const char *socketName, int sockID)</td></tr>
<tr class="memdesc:a5609fdc7bbe878c35e95cd378dbb1ede"><td class="mdescLeft">&#160;</td><td class="mdescRight">AssignNameToSocket Give a UNIX file name to the IPC port, so other instances of Nachos can locate the port. <br /></td></tr>
<tr class="separator:a5609fdc7bbe878c35e95cd378dbb1ede"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec36659fb6a7ed1e6b4ec57f5ddcc76b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aec36659fb6a7ed1e6b4ec57f5ddcc76b"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sysdep_8cc.html#aec36659fb6a7ed1e6b4ec57f5ddcc76b">DeAssignNameToSocket</a> (const char *socketName)</td></tr>
<tr class="memdesc:aec36659fb6a7ed1e6b4ec57f5ddcc76b"><td class="mdescLeft">&#160;</td><td class="mdescRight">DeAssignNameToSocket Delete the UNIX file name we assigned to our IPC port, on cleanup. <br /></td></tr>
<tr class="separator:aec36659fb6a7ed1e6b4ec57f5ddcc76b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d20b6480716b75b5e1deab47a1f2731"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sysdep_8cc.html#a2d20b6480716b75b5e1deab47a1f2731">PollSocket</a> (int sockID)</td></tr>
<tr class="memdesc:a2d20b6480716b75b5e1deab47a1f2731"><td class="mdescLeft">&#160;</td><td class="mdescRight">PollSocket.  <a href="#a2d20b6480716b75b5e1deab47a1f2731">More...</a><br /></td></tr>
<tr class="separator:a2d20b6480716b75b5e1deab47a1f2731"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fe94ec77f8866b6f7c75f7c7e0e91c1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1fe94ec77f8866b6f7c75f7c7e0e91c1"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sysdep_8cc.html#a1fe94ec77f8866b6f7c75f7c7e0e91c1">ReadFromSocket</a> (int sockID, char *buffer, int packetSize)</td></tr>
<tr class="memdesc:a1fe94ec77f8866b6f7c75f7c7e0e91c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">ReadFromSocket Read a fixed size packet off the IPC port. Abort on error. <br /></td></tr>
<tr class="separator:a1fe94ec77f8866b6f7c75f7c7e0e91c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a416cd1a34c0b5e2197f22a692f35546d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a416cd1a34c0b5e2197f22a692f35546d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sysdep_8cc.html#a416cd1a34c0b5e2197f22a692f35546d">SendToSocket</a> (int sockID, const char *buffer, int packetSize, const char *toName)</td></tr>
<tr class="memdesc:a416cd1a34c0b5e2197f22a692f35546d"><td class="mdescLeft">&#160;</td><td class="mdescRight">SendToSocket Transmit a fixed size packet to another Nachos' IPC port. Abort on error. <br /></td></tr>
<tr class="separator:a416cd1a34c0b5e2197f22a692f35546d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb2f3e6e1020ef5a3b89a8a870e9ddb1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sysdep_8cc.html#abb2f3e6e1020ef5a3b89a8a870e9ddb1">CallOnUserAbort</a> (VoidNoArgFunctionPtr func)</td></tr>
<tr class="memdesc:abb2f3e6e1020ef5a3b89a8a870e9ddb1"><td class="mdescLeft">&#160;</td><td class="mdescRight">CallOnUserAbort Arrange that "func" will be called when the user aborts (e.g., by hitting ctl-C.  <a href="#abb2f3e6e1020ef5a3b89a8a870e9ddb1">More...</a><br /></td></tr>
<tr class="separator:abb2f3e6e1020ef5a3b89a8a870e9ddb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20cfb7568775ef01bd7c43ee8051495c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a20cfb7568775ef01bd7c43ee8051495c"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sysdep_8cc.html#a20cfb7568775ef01bd7c43ee8051495c">Delay</a> (int seconds)</td></tr>
<tr class="memdesc:a20cfb7568775ef01bd7c43ee8051495c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sleep Put the UNIX process running Nachos to sleep for x seconds, to give the user time to start up another invocation of Nachos in a different UNIX shell. <br /></td></tr>
<tr class="separator:a20cfb7568775ef01bd7c43ee8051495c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12b9283f52eaf7610afe4b04fbca2ff0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sysdep_8cc.html#a12b9283f52eaf7610afe4b04fbca2ff0">Abort</a> ()</td></tr>
<tr class="memdesc:a12b9283f52eaf7610afe4b04fbca2ff0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Abort Quit and drop core.  <a href="#a12b9283f52eaf7610afe4b04fbca2ff0">More...</a><br /></td></tr>
<tr class="separator:a12b9283f52eaf7610afe4b04fbca2ff0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b9ef9330856c5a5a02f2d3ef0497e04"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8b9ef9330856c5a5a02f2d3ef0497e04"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sysdep_8cc.html#a8b9ef9330856c5a5a02f2d3ef0497e04">Exit</a> (int exitCode)</td></tr>
<tr class="memdesc:a8b9ef9330856c5a5a02f2d3ef0497e04"><td class="mdescLeft">&#160;</td><td class="mdescRight">Exit Quit without dropping core. <br /></td></tr>
<tr class="separator:a8b9ef9330856c5a5a02f2d3ef0497e04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae08b1beb5fa6e506cd63a2637f34e912"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sysdep_8cc.html#ae08b1beb5fa6e506cd63a2637f34e912">RandomInit</a> (unsigned seed)</td></tr>
<tr class="memdesc:ae08b1beb5fa6e506cd63a2637f34e912"><td class="mdescLeft">&#160;</td><td class="mdescRight">RandomInit Initialize the pseudo-random number generator. We use the now obsolete "srand" and "rand" because they are more portable!  <a href="#ae08b1beb5fa6e506cd63a2637f34e912">More...</a><br /></td></tr>
<tr class="separator:ae08b1beb5fa6e506cd63a2637f34e912"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac8c6c00a0e52489ecf8e8a6d9eba228"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sysdep_8cc.html#aac8c6c00a0e52489ecf8e8a6d9eba228">Random</a> ()</td></tr>
<tr class="memdesc:aac8c6c00a0e52489ecf8e8a6d9eba228"><td class="mdescLeft">&#160;</td><td class="mdescRight">Random.  <a href="#aac8c6c00a0e52489ecf8e8a6d9eba228">More...</a><br /></td></tr>
<tr class="separator:aac8c6c00a0e52489ecf8e8a6d9eba228"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a183868423241d09c586310b2d5d266c7"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sysdep_8cc.html#a183868423241d09c586310b2d5d266c7">AllocBoundedArray</a> (int size)</td></tr>
<tr class="memdesc:a183868423241d09c586310b2d5d266c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">AllocBoundedArray.  <a href="#a183868423241d09c586310b2d5d266c7">More...</a><br /></td></tr>
<tr class="separator:a183868423241d09c586310b2d5d266c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa822bb4ab0a638915834056be1393abb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sysdep_8cc.html#aa822bb4ab0a638915834056be1393abb">DeallocBoundedArray</a> (char *ptr, int size)</td></tr>
<tr class="memdesc:aa822bb4ab0a638915834056be1393abb"><td class="mdescLeft">&#160;</td><td class="mdescRight">DeallocBoundedArray Deallocate an array of integers, unprotecting its two boundary pages.  <a href="#aa822bb4ab0a638915834056be1393abb">More...</a><br /></td></tr>
<tr class="separator:aa822bb4ab0a638915834056be1393abb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation of system-dependent interface. </p>
<dl class="section author"><dt>Author</dt><dd>Olivier Hureau, Hugo Feydel , Julien ALaimo Nachos uses the routines defined here, rather than directly calling the UNIX library, to simplify porting between versions of UNIX, and even to other systems, such as MSDOS.</dd></dl>
<p>On UNIX, almost all of these routines are simple wrappers for the underlying UNIX system calls.</p>
<p>NOTE: all of these routines refer to operations on the underlying host machine (e.g., the DECstation, SPARC, etc.), supporting the Nachos simulation code. Nachos implements similar operations, (such as opening a file), but those are implemented in terms of hardware devices, which are simulated by calls to the underlying routines in the host workstation OS.</p>
<p>This file includes lots of calls to C routines. C++ requires us to wrap all C definitions with a "extern "C" block". This prevents the internal forms of the names from being changed by the C++ compiler.</p>
<p>Copyright (c) 1992-1993 The Regents of the University of California. All rights reserved. See <a class="el" href="copyright_8h_source.html">copyright.h</a> for copyright notice and limitation of liability and disclaimer of warranty provisions. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a12b9283f52eaf7610afe4b04fbca2ff0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Abort </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Abort Quit and drop core. </p>
<p>Process control: abort, exit, and sleep. </p>

</div>
</div>
<a class="anchor" id="a183868423241d09c586310b2d5d266c7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* AllocBoundedArray </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>AllocBoundedArray. </p>
<p>Allocate, de-allocate an array, such that de-referencing just beyond either end of the array will cause an error.</p>
<dl class="section return"><dt>Returns</dt><dd>Return an array, with the two pages just before and after the array unmapped, to catch illegal references off the end of the array. Particularly useful for catching overflow beyond fixed-size thread execution stacks.</dd></dl>
<p>Note: Just return the useful part!</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>&ndash; amount of useful space needed (in bytes) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="abb2f3e6e1020ef5a3b89a8a870e9ddb1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CallOnUserAbort </td>
          <td>(</td>
          <td class="paramtype">VoidNoArgFunctionPtr&#160;</td>
          <td class="paramname"><em>func</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>CallOnUserAbort Arrange that "func" will be called when the user aborts (e.g., by hitting ctl-C. </p>
<p>Initialize system so that cleanUp routine is called when user hits ctl-C. </p>

</div>
</div>
<a class="anchor" id="aa822bb4ab0a638915834056be1393abb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DeallocBoundedArray </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>DeallocBoundedArray Deallocate an array of integers, unprotecting its two boundary pages. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>&ndash; the array to be deallocated </td></tr>
    <tr><td class="paramname">size</td><td>&ndash; amount of useful space in the array (in bytes) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a65769583d8f332abff719d4665a3fd8d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int OpenForReadWrite </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>crashOnError</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>OpenForReadWrite Open a file for reading or writing. </p>
<dl class="section return"><dt>Returns</dt><dd>Return the file descriptor, or error if it doesn't exist.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>&ndash; file name </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aa2de662339cf5720253d92012231f4cc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int OpenForWrite </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>OpenForWrite Open a file for writing. Create it if it doesn't exist; truncate it if it does already exist. </p>
<dl class="section return"><dt>Returns</dt><dd>Return the file descriptor. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>&ndash; file name </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a6d54b43fc541aae810be164b449b331a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool PollFile </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>PollFile Check open file or open socket to see if there are any characters that can be read immediately. If so, read them in, and return TRUE. </p>
<p>In the network case, if there are no threads for us to run, and no characters to be read, we need to give the other side a chance to get our host's CPU (otherwise, we'll go really slowly, since UNIX time-slices infrequently, and this would be like busy-waiting). So we delay for a short fixed time, before allowing ourselves to be re-scheduled (sort of like a Yield, but cast in terms of UNIX).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>&ndash; the file descriptor of the file to be polled </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a2d20b6480716b75b5e1deab47a1f2731"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool PollSocket </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sockID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>PollSocket. </p>
<dl class="section return"><dt>Returns</dt><dd>Return TRUE if there are any messages waiting to arrive on the IPC port. </dd></dl>

</div>
</div>
<a class="anchor" id="aac8c6c00a0e52489ecf8e8a6d9eba228"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Random </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Random. </p>
<dl class="section return"><dt>Returns</dt><dd>Return a pseudo-random number. </dd></dl>

</div>
</div>
<a class="anchor" id="ae08b1beb5fa6e506cd63a2637f34e912"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RandomInit </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>seed</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>RandomInit Initialize the pseudo-random number generator. We use the now obsolete "srand" and "rand" because they are more portable! </p>
<p>Initialize the pseudo random number generator. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
