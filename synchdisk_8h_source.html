<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>tac0S: code/filesys/synchdisk.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tac0S
   </div>
   <div id="projectbrief">Template Affectional Command Operating System</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_050edd66366d13764f98250ef6db77f6.html">code</a></li><li class="navelem"><a class="el" href="dir_8e72e263aa613966cfdc557bf0a05642.html">filesys</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">synchdisk.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="synchdisk_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;copyright.h&quot;</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#ifndef SYNCHDISK_H</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#define SYNCHDISK_H</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="disk_8h.html">disk.h</a>&quot;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="synch_8h.html">synch.h</a>&quot;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno"><a class="line" href="class_synch_disk.html">   28</a></span>&#160;<span class="keyword">class </span><a class="code" href="class_synch_disk.html">SynchDisk</a> {</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  <span class="keyword">public</span>:</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    <a class="code" href="class_synch_disk.html#aa6cc1815e0aca2d6fe11d426942e6538">SynchDisk</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* name);            <span class="comment">// Initialize a synchronous disk,</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;                    <span class="comment">// by initializing the raw Disk.</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    <a class="code" href="class_synch_disk.html#a0e0c6875e2a243e4176b6da29fdf392b">~SynchDisk</a>();           <span class="comment">// De-allocate the synch disk data</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    </div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_synch_disk.html#a7d8195bd5d464e4771946eb03c61e8c8">ReadSector</a>(<span class="keywordtype">int</span> sectorNumber, <span class="keywordtype">char</span>* <a class="code" href="structdata.html">data</a>);</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;                        <span class="comment">// Read/write a disk sector, returning</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;                        <span class="comment">// only once the data is actually read </span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;                    <span class="comment">// or written.  These call</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;                        <span class="comment">// Disk::ReadRequest/WriteRequest and</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;                    <span class="comment">// then wait until the request is done.</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_synch_disk.html#aadb7e2ce6cf32727e493c63c5ea1018b">WriteSector</a>(<span class="keywordtype">int</span> sectorNumber, <span class="keywordtype">char</span>* data);</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    </div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_synch_disk.html#a973a65b7b7b92f5fabf18da8b8bae402">RequestDone</a>();         <span class="comment">// Called by the disk device interrupt</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;                    <span class="comment">// handler, to signal that the</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;                    <span class="comment">// current disk operation is complete.</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="keyword">private</span>:</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <a class="code" href="class_disk.html">Disk</a> *disk;             <span class="comment">// Raw disk device</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <a class="code" href="class_semaphore.html">Semaphore</a> *semaphore;       <span class="comment">// To synchronize requesting thread </span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;                    <span class="comment">// with the interrupt handler</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <a class="code" href="class_lock.html">Lock</a> *lock;             <span class="comment">// Only one read/write request</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;                    <span class="comment">// can be sent to the disk at a time</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;};</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#endif // SYNCHDISK_H</span></div><div class="ttc" id="class_synch_disk_html_aadb7e2ce6cf32727e493c63c5ea1018b"><div class="ttname"><a href="class_synch_disk.html#aadb7e2ce6cf32727e493c63c5ea1018b">SynchDisk::WriteSector</a></div><div class="ttdeci">void WriteSector(int sectorNumber, char *data)</div><div class="ttdoc">SynchDisk::WriteSector Write the contents of a buffer into a disk sector. Return only after the data ...</div><div class="ttdef"><b>Definition:</b> synchdisk.cc:94</div></div>
<div class="ttc" id="class_synch_disk_html_a7d8195bd5d464e4771946eb03c61e8c8"><div class="ttname"><a href="class_synch_disk.html#a7d8195bd5d464e4771946eb03c61e8c8">SynchDisk::ReadSector</a></div><div class="ttdeci">void ReadSector(int sectorNumber, char *data)</div><div class="ttdoc">SynchDisk::ReadSector Read the contents of a disk sector into a buffer. Return only after the data ha...</div><div class="ttdef"><b>Definition:</b> synchdisk.cc:76</div></div>
<div class="ttc" id="class_disk_html"><div class="ttname"><a href="class_disk.html">Disk</a></div><div class="ttdoc">The following class defines a physical disk I/O device. The disk has a single surface, split up into &quot;tracks&quot;, and each track split up into &quot;sectors&quot; (the same number of sectors on each track, and each sector has the same number of bytes of storage). </div><div class="ttdef"><b>Definition:</b> disk.h:57</div></div>
<div class="ttc" id="class_synch_disk_html_a973a65b7b7b92f5fabf18da8b8bae402"><div class="ttname"><a href="class_synch_disk.html#a973a65b7b7b92f5fabf18da8b8bae402">SynchDisk::RequestDone</a></div><div class="ttdeci">void RequestDone()</div><div class="ttdoc">SynchDisk::RequestDone Disk interrupt handler. Wake up any thread waiting for the disk request to fin...</div><div class="ttdef"><b>Definition:</b> synchdisk.cc:109</div></div>
<div class="ttc" id="class_synch_disk_html"><div class="ttname"><a href="class_synch_disk.html">SynchDisk</a></div><div class="ttdoc">The following class defines a &quot;synchronous&quot; disk abstraction. As with other I/O devices, the raw physical disk is an asynchronous device – requests to read or write portions of the disk return immediately, and an interrupt occurs later to signal that the operation completed. (Also, the physical characteristics of the disk device assume that only one operation can be requested at a time). </div><div class="ttdef"><b>Definition:</b> synchdisk.h:28</div></div>
<div class="ttc" id="class_semaphore_html"><div class="ttname"><a href="class_semaphore.html">Semaphore</a></div><div class="ttdoc">The following class defines a &quot;semaphore&quot; whose value is a non-negative integer. The semaphore has on...</div><div class="ttdef"><b>Definition:</b> synch.h:42</div></div>
<div class="ttc" id="class_synch_disk_html_aa6cc1815e0aca2d6fe11d426942e6538"><div class="ttname"><a href="class_synch_disk.html#aa6cc1815e0aca2d6fe11d426942e6538">SynchDisk::SynchDisk</a></div><div class="ttdeci">SynchDisk(const char *name)</div><div class="ttdoc">SynchDisk::SynchDisk Initialize the synchronous interface to the physical disk, in turn initializing ...</div><div class="ttdef"><b>Definition:</b> synchdisk.cc:46</div></div>
<div class="ttc" id="synch_8h_html"><div class="ttname"><a href="synch_8h.html">synch.h</a></div><div class="ttdoc">Data structures for synchronizing threads. </div></div>
<div class="ttc" id="class_lock_html"><div class="ttname"><a href="class_lock.html">Lock</a></div><div class="ttdef"><b>Definition:</b> synch.h:73</div></div>
<div class="ttc" id="structdata_html"><div class="ttname"><a href="structdata.html">data</a></div><div class="ttdef"><b>Definition:</b> out.c:36</div></div>
<div class="ttc" id="class_synch_disk_html_a0e0c6875e2a243e4176b6da29fdf392b"><div class="ttname"><a href="class_synch_disk.html#a0e0c6875e2a243e4176b6da29fdf392b">SynchDisk::~SynchDisk</a></div><div class="ttdeci">~SynchDisk()</div><div class="ttdoc">SynchDisk::~SynchDisk De-allocate data structures needed for the synchronous disk abstraction...</div><div class="ttdef"><b>Definition:</b> synchdisk.cc:59</div></div>
<div class="ttc" id="disk_8h_html"><div class="ttname"><a href="disk_8h.html">disk.h</a></div><div class="ttdoc">Data structures to emulate a physical disk </div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
