<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>tac0S: Semaphore Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tac0S
   </div>
   <div id="projectbrief">Template Affectional Command Operating System</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_semaphore-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Semaphore Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The following class defines a "semaphore" whose value is a non-negative integer. The semaphore has only two operations <a class="el" href="class_semaphore.html#a4fee22da0205e3c704b08beaa17e0e7a" title="Semaphore::P Wait until semaphore value &gt; 0, then decrement. Checking the value and decrementing must...">P()</a> and <a class="el" href="class_semaphore.html#a3e42125b95660ef696d0d0069b804343" title="Semaphore::V Increment semaphore value, waking up a waiter if necessary. As with P(), this operation must be atomic, so we need to disable interrupts. Scheduler::ReadyToRun() assumes that threads are disabled when it is called. ">V()</a>:  
 <a href="class_semaphore.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="synch_8h_source.html">synch.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a671a20336d97ab712cc84aab3381d34d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_semaphore.html#a671a20336d97ab712cc84aab3381d34d">Semaphore</a> (const char *debugName, int initialValue)</td></tr>
<tr class="memdesc:a671a20336d97ab712cc84aab3381d34d"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="class_semaphore.html#a671a20336d97ab712cc84aab3381d34d" title="Semaphore::Semaphore Initialize a semaphore, so that it can be used for synchronization. ">Semaphore::Semaphore</a> Initialize a semaphore, so that it can be used for synchronization.  <a href="#a671a20336d97ab712cc84aab3381d34d">More...</a><br /></td></tr>
<tr class="separator:a671a20336d97ab712cc84aab3381d34d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a633658a6fde276bffc912028725c6ade"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a633658a6fde276bffc912028725c6ade"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_semaphore.html#a633658a6fde276bffc912028725c6ade">~Semaphore</a> ()</td></tr>
<tr class="memdesc:a633658a6fde276bffc912028725c6ade"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="class_semaphore.html#a671a20336d97ab712cc84aab3381d34d" title="Semaphore::Semaphore Initialize a semaphore, so that it can be used for synchronization. ">Semaphore::Semaphore</a> De-allocate semaphore, when no longer needed. Assume no one is still waiting on the semaphore! <br /></td></tr>
<tr class="separator:a633658a6fde276bffc912028725c6ade"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42700933286df899977950787b46499e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a42700933286df899977950787b46499e"></a>
const char *&#160;</td><td class="memItemRight" valign="bottom"><b>getName</b> ()</td></tr>
<tr class="separator:a42700933286df899977950787b46499e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fee22da0205e3c704b08beaa17e0e7a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_semaphore.html#a4fee22da0205e3c704b08beaa17e0e7a">P</a> ()</td></tr>
<tr class="memdesc:a4fee22da0205e3c704b08beaa17e0e7a"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="class_semaphore.html#a4fee22da0205e3c704b08beaa17e0e7a" title="Semaphore::P Wait until semaphore value &gt; 0, then decrement. Checking the value and decrementing must...">Semaphore::P</a> Wait until semaphore value &gt; 0, then decrement. Checking the value and decrementing must be done atomically, so we need to disable interrupts before checking the value.  <a href="#a4fee22da0205e3c704b08beaa17e0e7a">More...</a><br /></td></tr>
<tr class="separator:a4fee22da0205e3c704b08beaa17e0e7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e42125b95660ef696d0d0069b804343"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3e42125b95660ef696d0d0069b804343"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_semaphore.html#a3e42125b95660ef696d0d0069b804343">V</a> ()</td></tr>
<tr class="memdesc:a3e42125b95660ef696d0d0069b804343"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="class_semaphore.html#a3e42125b95660ef696d0d0069b804343" title="Semaphore::V Increment semaphore value, waking up a waiter if necessary. As with P(), this operation must be atomic, so we need to disable interrupts. Scheduler::ReadyToRun() assumes that threads are disabled when it is called. ">Semaphore::V</a> Increment semaphore value, waking up a waiter if necessary. As with <a class="el" href="class_semaphore.html#a4fee22da0205e3c704b08beaa17e0e7a" title="Semaphore::P Wait until semaphore value &gt; 0, then decrement. Checking the value and decrementing must...">P()</a>, this operation must be atomic, so we need to disable interrupts. <a class="el" href="class_scheduler.html#a18e89ab130a40c423da77673f12585d7" title="Scheduler::ReadyToRun Mark a thread as ready, but not running. Put it on the ready list...">Scheduler::ReadyToRun()</a> assumes that threads are disabled when it is called. <br /></td></tr>
<tr class="separator:a3e42125b95660ef696d0d0069b804343"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The following class defines a "semaphore" whose value is a non-negative integer. The semaphore has only two operations <a class="el" href="class_semaphore.html#a4fee22da0205e3c704b08beaa17e0e7a" title="Semaphore::P Wait until semaphore value &gt; 0, then decrement. Checking the value and decrementing must...">P()</a> and <a class="el" href="class_semaphore.html#a3e42125b95660ef696d0d0069b804343" title="Semaphore::V Increment semaphore value, waking up a waiter if necessary. As with P(), this operation must be atomic, so we need to disable interrupts. Scheduler::ReadyToRun() assumes that threads are disabled when it is called. ">V()</a>: </p>
<p><a class="el" href="class_semaphore.html#a4fee22da0205e3c704b08beaa17e0e7a" title="Semaphore::P Wait until semaphore value &gt; 0, then decrement. Checking the value and decrementing must...">P()</a> &ndash; waits until value &gt; 0, then decrement</p>
<p><a class="el" href="class_semaphore.html#a3e42125b95660ef696d0d0069b804343" title="Semaphore::V Increment semaphore value, waking up a waiter if necessary. As with P(), this operation must be atomic, so we need to disable interrupts. Scheduler::ReadyToRun() assumes that threads are disabled when it is called. ">V()</a> &ndash; increment, waking up a thread waiting in <a class="el" href="class_semaphore.html#a4fee22da0205e3c704b08beaa17e0e7a" title="Semaphore::P Wait until semaphore value &gt; 0, then decrement. Checking the value and decrementing must...">P()</a> if necessary</p>
<p>Note that the interface does <em>not</em> allow a thread to read the value of the semaphore directly &ndash; even if you did read the value, the only thing you would know is what the value used to be. You don't know what the value is now, because by the time you get the value into a register, a context switch might have occurred, and some other thread might have called P or V, so the true value might now be different. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a671a20336d97ab712cc84aab3381d34d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Semaphore::Semaphore </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>debugName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>initialValue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="class_semaphore.html#a671a20336d97ab712cc84aab3381d34d" title="Semaphore::Semaphore Initialize a semaphore, so that it can be used for synchronization. ">Semaphore::Semaphore</a> Initialize a semaphore, so that it can be used for synchronization. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">debugName</td><td>is an arbitrary name, useful for debugging. </td></tr>
    <tr><td class="paramname">initialValue</td><td>is the initial value of the semaphore. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a4fee22da0205e3c704b08beaa17e0e7a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Semaphore::P </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="class_semaphore.html#a4fee22da0205e3c704b08beaa17e0e7a" title="Semaphore::P Wait until semaphore value &gt; 0, then decrement. Checking the value and decrementing must...">Semaphore::P</a> Wait until semaphore value &gt; 0, then decrement. Checking the value and decrementing must be done atomically, so we need to disable interrupts before checking the value. </p>
<p>Note that <a class="el" href="class_thread.html#a187a4c1e62087511b69068220840244a" title="Thread::Sleep Relinquish the CPU, because the current thread is blocked waiting on a synchronization ...">Thread::Sleep</a> assumes that interrupts are disabled when it is called. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>code/threads/<a class="el" href="synch_8h_source.html">synch.h</a></li>
<li>code/threads/<a class="el" href="synch_8cc.html">synch.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
