<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>tac0S: Machine Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tac0S
   </div>
   <div id="projectbrief">Template Affectional Command Operating System</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="class_machine-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Machine Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The following class defines the simulated host workstation hardware, as seen by user programs &ndash; the CPU registers, main memory, etc. User programs shouldn't be able to tell that they are running on our simulator or on the real hardware, except we don't support floating point instructions the system call interface to Nachos is not the same as UNIX (10 system calls in Nachos vs. 200 in UNIX!) If we were to implement more of the UNIX system calls, we ought to be able to run Nachos on top of Nachos!  
 <a href="class_machine.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="machine_8h_source.html">machine.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad5958275a54dbc299b71ecdba7da0604"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#ad5958275a54dbc299b71ecdba7da0604">Machine</a> (bool debug)</td></tr>
<tr class="memdesc:ad5958275a54dbc299b71ecdba7da0604"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="class_machine.html#ad5958275a54dbc299b71ecdba7da0604" title="Machine::Machine Initialize the simulation of user program execution. ">Machine::Machine</a> Initialize the simulation of user program execution.  <a href="#ad5958275a54dbc299b71ecdba7da0604">More...</a><br /></td></tr>
<tr class="separator:ad5958275a54dbc299b71ecdba7da0604"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f595e09b54761f6c1e73b192067bd9c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7f595e09b54761f6c1e73b192067bd9c"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#a7f595e09b54761f6c1e73b192067bd9c">~Machine</a> ()</td></tr>
<tr class="memdesc:a7f595e09b54761f6c1e73b192067bd9c"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="class_machine.html#a7f595e09b54761f6c1e73b192067bd9c" title="Machine::~Machine De-allocate the data structures used to simulate user program execution. ">Machine::~Machine</a> De-allocate the data structures used to simulate user program execution. <br /></td></tr>
<tr class="separator:a7f595e09b54761f6c1e73b192067bd9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ae02fe297c300c6bd9047c52aec9f46"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#a3ae02fe297c300c6bd9047c52aec9f46">Run</a> (void *fExit)</td></tr>
<tr class="memdesc:a3ae02fe297c300c6bd9047c52aec9f46"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="class_machine.html#a3ae02fe297c300c6bd9047c52aec9f46" title="Machine::Run Simulate the execution of a user-level program on Nachos. Called by the kernel when the ...">Machine::Run</a> Simulate the execution of a user-level program on Nachos. Called by the kernel when the program starts up; never returns.  <a href="#a3ae02fe297c300c6bd9047c52aec9f46">More...</a><br /></td></tr>
<tr class="separator:a3ae02fe297c300c6bd9047c52aec9f46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a8ed459cb3700c406564db72957bae3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6a8ed459cb3700c406564db72957bae3"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#a6a8ed459cb3700c406564db72957bae3">ReadRegister</a> (int num)</td></tr>
<tr class="memdesc:a6a8ed459cb3700c406564db72957bae3"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="class_machine.html#a6a8ed459cb3700c406564db72957bae3" title="Machine::ReadRegister/WriteRegister Fetch or write the contents of a user program register...">Machine::ReadRegister</a>/WriteRegister Fetch or write the contents of a user program register. <br /></td></tr>
<tr class="separator:a6a8ed459cb3700c406564db72957bae3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad58cc61e347395586a1cb91272dc4d61"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad58cc61e347395586a1cb91272dc4d61"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>WriteRegister</b> (int num, int value)</td></tr>
<tr class="separator:ad58cc61e347395586a1cb91272dc4d61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8d77f2964313173f1bada56bc596e48"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af8d77f2964313173f1bada56bc596e48"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>OneInstruction</b> (<a class="el" href="class_instruction.html">Instruction</a> *instr)</td></tr>
<tr class="separator:af8d77f2964313173f1bada56bc596e48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11fda0ddf1f16d8b1a06f75d1ab5b8a1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#a11fda0ddf1f16d8b1a06f75d1ab5b8a1">DelayedLoad</a> (int nextReg, int nextVal)</td></tr>
<tr class="memdesc:a11fda0ddf1f16d8b1a06f75d1ab5b8a1"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="class_machine.html#a11fda0ddf1f16d8b1a06f75d1ab5b8a1" title="Machine::DelayedLoad Simulate effects of a delayed load. ">Machine::DelayedLoad</a> Simulate effects of a delayed load.  <a href="#a11fda0ddf1f16d8b1a06f75d1ab5b8a1">More...</a><br /></td></tr>
<tr class="separator:a11fda0ddf1f16d8b1a06f75d1ab5b8a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01f1647867db027c04b6290b46dd988d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#a01f1647867db027c04b6290b46dd988d">ReadMem</a> (int addr, int size, int *value)</td></tr>
<tr class="memdesc:a01f1647867db027c04b6290b46dd988d"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="class_machine.html#a01f1647867db027c04b6290b46dd988d" title="Machine::ReadMem Read &quot;size&quot; (1, 2, or 4) bytes of virtual memory at &quot;addr&quot; into the location pointed...">Machine::ReadMem</a> Read "size" (1, 2, or 4) bytes of virtual memory at "addr" into the location pointed to by "value".  <a href="#a01f1647867db027c04b6290b46dd988d">More...</a><br /></td></tr>
<tr class="separator:a01f1647867db027c04b6290b46dd988d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f442601e649b537a65b8b2440342227"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#a1f442601e649b537a65b8b2440342227">WriteMem</a> (int addr, int size, int value)</td></tr>
<tr class="memdesc:a1f442601e649b537a65b8b2440342227"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="class_machine.html#a1f442601e649b537a65b8b2440342227" title="Machine::WriteMem Write &quot;size&quot; (1, 2, or 4) bytes of the contents of &quot;value&quot; into virtual memory at l...">Machine::WriteMem</a> Write "size" (1, 2, or 4) bytes of the contents of "value" into virtual memory at location "addr".  <a href="#a1f442601e649b537a65b8b2440342227">More...</a><br /></td></tr>
<tr class="separator:a1f442601e649b537a65b8b2440342227"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a754ddcbc077cc91463398de8b0f1d077"><td class="memItemLeft" align="right" valign="top">ExceptionType&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#a754ddcbc077cc91463398de8b0f1d077">Translate</a> (int virtAddr, int *physAddr, int size, bool writing)</td></tr>
<tr class="memdesc:a754ddcbc077cc91463398de8b0f1d077"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="class_machine.html#a754ddcbc077cc91463398de8b0f1d077" title="Machine::Translate Translate a virtual address into a physical address, using either a page table or ...">Machine::Translate</a> Translate a virtual address into a physical address, using either a page table or a TLB. Check for alignment and all sorts of other errors, and if everything is ok, set the use/dirty bits in the translation table entry, and store the translated physical address in "physAddr". If there was an error, returns the type of the exception.  <a href="#a754ddcbc077cc91463398de8b0f1d077">More...</a><br /></td></tr>
<tr class="separator:a754ddcbc077cc91463398de8b0f1d077"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d6f63790c0568437b100171f61fd77f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#a0d6f63790c0568437b100171f61fd77f">RaiseException</a> (ExceptionType which, int badVAddr)</td></tr>
<tr class="memdesc:a0d6f63790c0568437b100171f61fd77f"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="class_machine.html#a0d6f63790c0568437b100171f61fd77f" title="Machine::RaiseException Transfer control to the Nachos kernel from user mode, because the user progra...">Machine::RaiseException</a> Transfer control to the Nachos kernel from user mode, because the user program either invoked a system call, or some exception occured (such as the address translation failed).  <a href="#a0d6f63790c0568437b100171f61fd77f">More...</a><br /></td></tr>
<tr class="separator:a0d6f63790c0568437b100171f61fd77f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08d36bd75e689830c73e307e1c7f7e28"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#a08d36bd75e689830c73e307e1c7f7e28">Debugger</a> ()</td></tr>
<tr class="memdesc:a08d36bd75e689830c73e307e1c7f7e28"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="class_machine.html#a08d36bd75e689830c73e307e1c7f7e28" title="Machine::Debugger Primitive debugger for user programs. Note that we can&#39;t use gdb to debug user prog...">Machine::Debugger</a> Primitive debugger for user programs. Note that we can't use gdb to debug user programs, since gdb doesn't run on top of Nachos. It could, but you'd have to implement <em>a lot</em> more system calls to get it to work!  <a href="#a08d36bd75e689830c73e307e1c7f7e28">More...</a><br /></td></tr>
<tr class="separator:a08d36bd75e689830c73e307e1c7f7e28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e4dee4ed66da41de9bbebb161efd06f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4e4dee4ed66da41de9bbebb161efd06f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#a4e4dee4ed66da41de9bbebb161efd06f">DumpState</a> ()</td></tr>
<tr class="memdesc:a4e4dee4ed66da41de9bbebb161efd06f"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="class_machine.html#a4e4dee4ed66da41de9bbebb161efd06f" title="Machine::DumpState Print the user program&#39;s CPU state. We might print the contents of memory...">Machine::DumpState</a> Print the user program's CPU state. We might print the contents of memory, but that seemed like overkill. <br /></td></tr>
<tr class="separator:a4e4dee4ed66da41de9bbebb161efd06f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:aa2ad571478bcc8aa88cebe50fc533ec7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa2ad571478bcc8aa88cebe50fc533ec7"></a>
char *&#160;</td><td class="memItemRight" valign="bottom"><b>mainMemory</b></td></tr>
<tr class="separator:aa2ad571478bcc8aa88cebe50fc533ec7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97712e3db6165648d169598fdf26b756"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a97712e3db6165648d169598fdf26b756"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>registers</b> [NumTotalRegs]</td></tr>
<tr class="separator:a97712e3db6165648d169598fdf26b756"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a900108b92c72cfbcab9106d99be5a315"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a900108b92c72cfbcab9106d99be5a315"></a>
<a class="el" href="class_translation_entry.html">TranslationEntry</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>tlb</b></td></tr>
<tr class="separator:a900108b92c72cfbcab9106d99be5a315"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e4092e3d7bab29b7d1f54ad005527ca"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9e4092e3d7bab29b7d1f54ad005527ca"></a>
<a class="el" href="class_translation_entry.html">TranslationEntry</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>pageTable</b></td></tr>
<tr class="separator:a9e4092e3d7bab29b7d1f54ad005527ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a439af96b1d906dbea5dfb538d8491418"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a439af96b1d906dbea5dfb538d8491418"></a>
unsigned int&#160;</td><td class="memItemRight" valign="bottom"><b>pageTableSize</b></td></tr>
<tr class="separator:a439af96b1d906dbea5dfb538d8491418"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The following class defines the simulated host workstation hardware, as seen by user programs &ndash; the CPU registers, main memory, etc. User programs shouldn't be able to tell that they are running on our simulator or on the real hardware, except we don't support floating point instructions the system call interface to Nachos is not the same as UNIX (10 system calls in Nachos vs. 200 in UNIX!) If we were to implement more of the UNIX system calls, we ought to be able to run Nachos on top of Nachos! </p>
<p>The procedures in this class are defined in <a class="el" href="machine_8cc.html" title="Routines for simulating the execution of user programs. ">machine.cc</a>, <a class="el" href="mipssim_8cc.html" title="simulate a MIPS R2/3000 processor ">mipssim.cc</a>, and translate.cc. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ad5958275a54dbc299b71ecdba7da0604"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Machine::Machine </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>debug</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="class_machine.html#ad5958275a54dbc299b71ecdba7da0604" title="Machine::Machine Initialize the simulation of user program execution. ">Machine::Machine</a> Initialize the simulation of user program execution. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">debug</td><td>&ndash; if TRUE, drop into the debugger after each user instruction is executed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a08d36bd75e689830c73e307e1c7f7e28"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Machine::Debugger </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="class_machine.html#a08d36bd75e689830c73e307e1c7f7e28" title="Machine::Debugger Primitive debugger for user programs. Note that we can&#39;t use gdb to debug user prog...">Machine::Debugger</a> Primitive debugger for user programs. Note that we can't use gdb to debug user programs, since gdb doesn't run on top of Nachos. It could, but you'd have to implement <em>a lot</em> more system calls to get it to work! </p>
<p>So just allow single-stepping, and printing the contents of memory. </p>

</div>
</div>
<a class="anchor" id="a11fda0ddf1f16d8b1a06f75d1ab5b8a1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Machine::DelayedLoad </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nextReg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nextValue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="class_machine.html#a11fda0ddf1f16d8b1a06f75d1ab5b8a1" title="Machine::DelayedLoad Simulate effects of a delayed load. ">Machine::DelayedLoad</a> Simulate effects of a delayed load. </p>
<p>NOTE &ndash; RaiseException/CheckInterrupts must also call DelayedLoad, since any delayed load must get applied before we trap to the kernel. </p>

</div>
</div>
<a class="anchor" id="a0d6f63790c0568437b100171f61fd77f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Machine::RaiseException </td>
          <td>(</td>
          <td class="paramtype">ExceptionType&#160;</td>
          <td class="paramname"><em>which</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>badVAddr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="class_machine.html#a0d6f63790c0568437b100171f61fd77f" title="Machine::RaiseException Transfer control to the Nachos kernel from user mode, because the user progra...">Machine::RaiseException</a> Transfer control to the Nachos kernel from user mode, because the user program either invoked a system call, or some exception occured (such as the address translation failed). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">which</td><td>&ndash; the cause of the kernel trap </td></tr>
    <tr><td class="paramname">badVaddr</td><td>&ndash; the virtual address causing the trap, if appropriate </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a01f1647867db027c04b6290b46dd988d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Machine::ReadMem </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="class_machine.html#a01f1647867db027c04b6290b46dd988d" title="Machine::ReadMem Read &quot;size&quot; (1, 2, or 4) bytes of virtual memory at &quot;addr&quot; into the location pointed...">Machine::ReadMem</a> Read "size" (1, 2, or 4) bytes of virtual memory at "addr" into the location pointed to by "value". </p>
<dl class="section return"><dt>Returns</dt><dd>Returns FALSE if the translation step from virtual to physical memory failed.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>&ndash; the virtual address to read from </td></tr>
    <tr><td class="paramname">size</td><td>&ndash; the number of bytes to read (1, 2, or 4) </td></tr>
    <tr><td class="paramname">value</td><td>&ndash; the place to write the result </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a3ae02fe297c300c6bd9047c52aec9f46"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Machine::Run </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>fExit</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="class_machine.html#a3ae02fe297c300c6bd9047c52aec9f46" title="Machine::Run Simulate the execution of a user-level program on Nachos. Called by the kernel when the ...">Machine::Run</a> Simulate the execution of a user-level program on Nachos. Called by the kernel when the program starts up; never returns. </p>
<p>This routine is re-entrant, in that it can be called multiple times concurrently &ndash; one for each thread executing user code </p>

</div>
</div>
<a class="anchor" id="a754ddcbc077cc91463398de8b0f1d077"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ExceptionType Machine::Translate </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>virtAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>physAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>writing</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="class_machine.html#a754ddcbc077cc91463398de8b0f1d077" title="Machine::Translate Translate a virtual address into a physical address, using either a page table or ...">Machine::Translate</a> Translate a virtual address into a physical address, using either a page table or a TLB. Check for alignment and all sorts of other errors, and if everything is ok, set the use/dirty bits in the translation table entry, and store the translated physical address in "physAddr". If there was an error, returns the type of the exception. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">virtAddr</td><td>&ndash; the virtual address to translate </td></tr>
    <tr><td class="paramname">physAddr</td><td>&ndash; the place to store the physical address </td></tr>
    <tr><td class="paramname">size</td><td>&ndash; the amount of memory being read or written </td></tr>
    <tr><td class="paramname">writing</td><td>&ndash; if TRUE, check the "read-only" bit in the TLB </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a1f442601e649b537a65b8b2440342227"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Machine::WriteMem </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="class_machine.html#a1f442601e649b537a65b8b2440342227" title="Machine::WriteMem Write &quot;size&quot; (1, 2, or 4) bytes of the contents of &quot;value&quot; into virtual memory at l...">Machine::WriteMem</a> Write "size" (1, 2, or 4) bytes of the contents of "value" into virtual memory at location "addr". </p>
<dl class="section return"><dt>Returns</dt><dd>Returns FALSE if the translation step from virtual to physical memory failed.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>&ndash; the virtual address to write to </td></tr>
    <tr><td class="paramname">size</td><td>&ndash; the number of bytes to be written (1, 2, or 4) </td></tr>
    <tr><td class="paramname">value</td><td>&ndash; the data to be written </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>code/machine/<a class="el" href="machine_8h_source.html">machine.h</a></li>
<li>code/machine/<a class="el" href="machine_8cc.html">machine.cc</a></li>
<li>code/machine/<a class="el" href="mipssim_8cc.html">mipssim.cc</a></li>
<li>code/machine/translate.cc</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
